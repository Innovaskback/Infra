Zedny123*#@$

#1. System Update
sudo apt update && sudo apt upgrade -y

#2. Install Nginx
sudo apt install -y nginx nginx-extras openssl curl

#3. Backup the original configuration
sudo cp -r /etc/nginx /etc/nginx.backup.$(date +%Y%m%d)

#4. Create the required folders
sudo mkdir -p /etc/nginx/ssl
sudo mkdir -p /var/cache/nginx
sudo mkdir -p /var/log/nginx
sudo mkdir -p /etc/nginx/conf.d
sudo mkdir -p /etc/nginx/sites-available
sudo mkdir -p /etc/nginx/sites-enabled

#5. Create a self-signed SSL certificate
sudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/nginx/ssl/server.key -out /etc/nginx/ssl/server.crt -subj "/C=EG/ST=Cairo/L=Cairo/O=Organization/OU=IT/CN=64.20.63.5"

#6. Assign permissions
sudo chmod 600 /etc/nginx/ssl/server.key
sudo chmod 644 /etc/nginx/ssl/server.crt


#7. Copy files from the artifacts above.
sudo nano /etc/nginx/nginx.conf  # Copy the content of nginx_main_config
sudo nano /etc/nginx/conf.d/upstream.conf  # Copy the content of upstream_config
sudo nano /etc/nginx/sites-available/loadbalancer  # Copy the content of loadbalancer_config
sudo nano /etc/nginx/conf.d/monitoring.conf  # Copy the content of monitoring_config


#8. Activate the site
sudo ln -sf /etc/nginx/sites-available/loadbalancer /etc/nginx/sites-enabled/
sudo rm -f /etc/nginx/sites-enabled/default


#9. Configuration Test
sudo nginx -t


#10. Restart Nginx
sudo systemctl restart nginx
sudo systemctl enable nginx


#11. Check Status
sudo systemctl status nginx
curl http://69.10.55.230/health



Health check: http://69.10.55.230/health
Nginx status: http://127.0.0.1:8080/nginx_status
JSON health: http://127.0.0.1:8080/health/json





